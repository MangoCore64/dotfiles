# =============================================================================
#  çµ±ä¸€ä½¿ç”¨ Ctrl+A ä½œç‚º Prefix
#  é ç«¯æ¨¡å¼åˆ‡æ›ï¼šCtrl+A + R é€²å…¥ï¼ŒCtrl+Q é€€å‡º
#  å…¼å®¹ï¼štmux 3.2a+
#  Theme: Gruvbox Dark
# =============================================================================

# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ Â§0. çµ‚ç«¯è¨­å®šèˆ‡æ€§èƒ½èª¿æ•´                                                    â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# å¢å¼·é¡è‰²èˆ‡å±¬æ€§æ”¯æ´
set -ag terminal-overrides ",alacritty:RGB"
set -ag terminal-overrides ",*:U8=0"                              # underline
set -ag terminal-overrides ",*:Tc"                                # true color
set -ag terminal-overrides ",*:Ss=\\E[%p1%d q:Se=\\E[2 q"        # æ¸¸æ¨™å½¢ç‹€
set -as terminal-overrides ',*:smxx=\E[9m'                        # strikethrough
set -as terminal-overrides ',*:sitm=\E[3m'                        # italics
set -as terminal-overrides ',*:smul=\E[4m'                        # underline

# æ€§èƒ½èª¿æ•´ï¼ˆVim/Neovim ä½¿ç”¨è€…å¿…å‚™ï¼‰
set -s escape-time 10        # å¿«é€ŸéŸ¿æ‡‰ ESCï¼ˆé¿å… Vim å»¶é²ï¼‰
set -g repeat-time 600       # å»¶é•·æŒ‰éµé‡è¤‡æ™‚é–“
set -g display-time 2000     # è¨Šæ¯é¡¯ç¤ºæ™‚é–“
set -g status-interval 5     # ç‹€æ…‹åˆ—æ›´æ–°é »ç‡

# ç‰ˆæœ¬å…¼å®¹æ€§ï¼štmux 3.3a+ æ‰æ”¯æ´ allow-passthrough
# æœªä¾†å‡ç´šåˆ° 3.3a+ å¾Œå¯å–æ¶ˆä¸‹é¢é€™è¡Œçš„è¨»è§£
# set -g allow-passthrough all

# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ Â§1. åŸºæœ¬è¨­å®š                                                              â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
# Prefix è¨­å®š
set-option -g prefix C-a
unbind-key C-b
bind-key C-a send-prefix

set -g base-index 1
setw -g pane-base-index 1
set -g history-limit 100000  # çµ±ä¸€ä½¿ç”¨ 10 è¬è¡Œï¼ˆå¹³è¡¡æ•ˆèƒ½èˆ‡å¯¦ç”¨æ€§ï¼‰
set -g mouse on
setw -g mode-keys vi
set -g set-clipboard on

set-option -g set-titles on
set-option -g set-titles-string '#S / #W'

# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ Â§2. å¿«æ·éµç¶å®š                                                            â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
bind r source-file ~/.tmux.conf \; display "âœ“ Config Reloaded!"

# çª—æ ¼åˆ†å‰²
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

# çª—æ ¼å°èˆª - ç„¡å‰ç¶´ Alt+hjklï¼ˆé«˜æ•ˆå°èˆªï¼‰
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# æ–¹å‘éµå°èˆªï¼ˆå‚™ç”¨ï¼‰
bind Left select-pane -L
bind Down select-pane -D
bind Up select-pane -U
bind Right select-pane -R

# çª—æ ¼å¤§å°èª¿æ•´ - ç„¡å‰ç¶´ Alt+Shift+hjkl
bind -n M-H resize-pane -L 5
bind -n M-J resize-pane -D 5
bind -n M-K resize-pane -U 5
bind -n M-L resize-pane -R 5

# å¿«é€Ÿæœ€å¤§åŒ–
bind -n M-z resize-pane -Z

# 70/30 åˆ†å‰²
bind g resize-pane -x 70%

# è¦–çª—å°èˆª - Shift+æ–¹å‘éµ
bind -n S-Left  previous-window
bind -n S-Right next-window

# æŒ‰éµè½‰é€ï¼ˆç”¨æ–¼ nested tmuxï¼‰
bind-key -T prefix M-h send-keys M-h
bind-key -T prefix M-j send-keys M-j
bind-key -T prefix M-k send-keys M-k
bind-key -T prefix M-l send-keys M-l

# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ é ç«¯æ¨¡å¼åˆ‡æ›ï¼ˆä¿®æ­£ç‰ˆï¼‰- é—œéµä¿®å¾©ï¼                                         â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
# é€²å…¥é ç«¯æ¨¡å¼ï¼šCtrl+A + R
# - ç‹€æ…‹åˆ—è®Šç´…è‰²
# - æ‰€æœ‰æŒ‰éµç›´é€šåˆ°å…§å±¤ï¼ˆåŒ…æ‹¬ Ctrl+Aï¼‰
# - å¯ä»¥æ­£å¸¸æ“ä½œå…§å±¤ tmux
bind R \
  set prefix None \;\
  set key-table off \;\
  set status-style "bg=red" \;\
  display 'ğŸ”´ Remote Mode: Press Ctrl+Q to exit'

# é€€å‡ºé ç«¯æ¨¡å¼ï¼šCtrl+Qï¼ˆä¸æ˜¯ Ctrl+Aï¼ï¼‰
# - ä¿®æ­£ï¼šä½¿ç”¨ Ctrl+Q é€€å‡ºï¼Œä¸æœƒå’Œå…§å±¤ Ctrl+A è¡çª
# - ç‹€æ…‹åˆ—æ¢å¾©æ­£å¸¸
bind -T off C-q \
  set -u prefix \;\
  set -u key-table \;\
  set -u status-style \;\
  display 'ğŸŸ¢ Local Mode Restored'

# å…¶ä»–å¯¦ç”¨ç¶å®š
bind c new-window -c "#{pane_current_path}"
bind , command-prompt "rename-window %%"

# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ Â§3. TPM å¤–æ›ç®¡ç†                                                          â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'

# ä¸»é¡Œ
set -g @plugin 'egel/tmux-gruvbox'
set -g @tmux-gruvbox 'dark256'

# åŠŸèƒ½æ€§å¤–æ›
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-yank'

# è‡ªå‹•ä¿å­˜/æ¢å¾©
set -g @continuum-restore 'on'
set -g @continuum-save-interval '15'

# ã€ã€ã€ å¿…é ˆåœ¨æª”æ¡ˆçš„æœ€æœ«ç«¯ï¼ ã€‘ã€‘ã€‘
run '~/.tmux/plugins/tpm/tpm'

# â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
# â”‚ Â§4. è¤‡è£½æ¨¡å¼ä¿®å¾©ï¼ˆè¦†è“‹ tmux-yank éŒ¯èª¤ç¶å®šï¼‰                               â”‚
# â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi V send-keys -X select-line
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel
bind-key -T copy-mode-vi Y send-keys -X copy-line
bind-key -T copy-mode-vi Enter send-keys -X copy-selection-and-cancel
